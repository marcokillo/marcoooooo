<!DOCTYPE html>

<html lang="fa" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>قفل دیجیتال: رمز نقاب</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #0f0f23, #1a1a2e, #16213e);
      color: #ffffff;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      width: 100%;
      background: rgba(0, 0, 0, 0.4);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(15px);
      border: 2px solid rgba(0, 255, 255, 0.2);
    }

    .title {
      text-align: center;
      font-size: 2.5em;
      margin-bottom: 10px;
      background: linear-gradient(45deg, #00ffff, #0080ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
    }

    .subtitle {
      text-align: center;
      color: #ffd700;
      font-size: 1.2em;
      margin-bottom: 30px;
      opacity: 0.9;
    }

    .lock-container {
      display: flex;
      justify-content: center;
      margin: 30px 0;
    }

    .digital-lock {
      background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
      border-radius: 15px;
      padding: 25px;
      box-shadow:
        inset 5px 5px 10px rgba(0, 0, 0, 0.8),
        inset -5px -5px 10px rgba(255, 255, 255, 0.1),
        0 0 20px rgba(0, 255, 255, 0.3);
      border: 2px solid rgba(0, 255, 255, 0.4);
    }

    .display {
      background: #000;
      color: #00ff00;
      font-family: 'Courier New', monospace;
      font-size: 1.5em;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
      border: 2px solid #00ff00;
      box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      max-width: 250px;
      margin: 0 auto;
    }

    .key {
      background: linear-gradient(145deg, #404040, #2a2a2a);
      border: none;
      border-radius: 50%;
      width: 70px;
      height: 70px;
      font-size: 1.5em;
      color: #ffffff;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow:
        3px 3px 6px rgba(0, 0, 0, 0.8),
        -3px -3px 6px rgba(255, 255, 255, 0.1);
    }

    .key:hover {
      background: linear-gradient(145deg, #505050, #3a3a3a);
      transform: scale(1.05);
      box-shadow:
        0 0 15px rgba(0, 255, 255, 0.4),
        3px 3px 6px rgba(0, 0, 0, 0.8);
    }

    .key:active {
      transform: scale(0.95);
      box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.8);
    }

    .puzzle-section {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      padding: 25px;
      margin: 25px 0;
      border: 1px solid rgba(0, 255, 255, 0.3);
    }

    .puzzle-title {
      color: #00ffff;
      font-size: 1.4em;
      margin-bottom: 15px;
      text-align: center;
      border-bottom: 2px solid rgba(0, 255, 255, 0.3);
      padding-bottom: 8px;
    }

    .clue-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }

    .clue-item {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      padding: 20px;
      border: 1px solid rgba(255, 215, 0, 0.3);
      text-align: center;
      transition: all 0.3s ease;
    }


    .clue-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
      border-color: #ffd700;
    }

    .clue-number {
      font-size: 2.5em;
      color: #ffd700;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    .clue-text {
      margin-top: 10px;
      color: #ffffff;
      font-size: 1.1em;
    }

    .formula {
      background: rgba(0, 255, 255, 0.1);
      border: 2px dashed #00ffff;
      border-radius: 10px;
      padding: 15px;
      margin: 15px 0;
      text-align: center;
      font-size: 1.2em;
      color: #00ffff;
    }

    .alphabet-table {
      background: rgba(0, 0, 0, 0.4);
      border-radius: 10px;
      padding: 15px;
      margin: 15px 0;
      overflow-x: auto;
    }

    .alphabet-row {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin: 5px 0;
      flex-wrap: wrap;
    }

    .alphabet-cell {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(0, 255, 255, 0.3);
      padding: 8px 12px;
      border-radius: 5px;
      font-size: 0.9em;
      color: #ffffff;
      min-width: 40px;
      text-align: center;
    }

    .highlight {
      background: rgba(255, 215, 0, 0.3) !important;
      border-color: #ffd700 !important;
      color: #ffd700 !important;
    }

    .status-light {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      margin: 0 5px;
      display: inline-block;
      transition: all 0.3s ease;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
    }

    .red {
      background: #ff4444;
      box-shadow: 0 0 10px #ff4444;
    }

    .yellow {
      background: #ffff44;
      box-shadow: 0 0 10px #ffff44;
    }

    .green {
      background: #44ff44;
      box-shadow: 0 0 10px #44ff44;
    }

    .progress-section {
      text-align: center;
      margin: 20px 0;
    }

    .progress-text {
      color: #00ffff;
      font-size: 1.1em;
      margin-bottom: 10px;
    }

    .clear-btn,
    .help-btn {
      background: linear-gradient(145deg, #ff4444, #cc0000);
      border: none;
      border-radius: 25px;
      padding: 12px 25px;
      color: white;
      font-size: 1em;
      cursor: pointer;
      margin: 10px 5px;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .help-btn {
      background: linear-gradient(145deg, #ffd700, #ffb000);
      color: #000;
    }

    .clear-btn:hover,
    .help-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 7px 20px rgba(0, 0, 0, 0.4);
    }

    .success-animation {
      text-align: center;
      font-size: 3em;
      margin: 30px 0;
      display: none;
      animation: celebration 2s ease-in-out;
    }

    @keyframes celebration {

      0%,
      100% {
        transform: scale(1);
      }

      25% {
        transform: scale(1.1) rotate(-5deg);
      }

      50% {
        transform: scale(1.2);
      }

      75% {
        transform: scale(1.1) rotate(5deg);
      }
    }

    .hint-section {
      background: rgba(255, 215, 0, 0.1);
      border: 1px solid rgba(255, 215, 0, 0.3);
      border-radius: 10px;
      padding: 15px;
      margin: 15px 0;
      display: none;
    }

    .attempts {
      text-align: center;
      color: #ffd700;
      font-size: 1.1em;
      margin: 10px 0;
    }
  </style>

</head>

<body>
  <div class="container">
    <h1 class="title">🔐 قفل دیجیتال محرمانه</h1>
    <p class="subtitle">برای باز کردن قفل، رمز 4 رقمی را کشف کن</p>
    <div class="puzzle-section">
      <h2 class="puzzle-title">🧩 معماهای رمز</h2>

      <div class="clue-grid">
        <div class="clue-item">
          <div class="clue-number">9</div>
          <div class="clue-text">رقم دوم عدد 29<br>(موقعیت ن در الفبا)</div>
        </div>
        <div class="clue-item">
          <div class="clue-number">1</div>

          <div class="clue-text">رقم اول عدد 17<br>مجموع: مثلث(3) + مربع(4) + دایره(10)</div>
        </div>
        <div class="clue-item">
          <div class="clue-number">2</div>
          <div class="clue-text">رقم اول عدد 24<br>(موقعیت ق در الفبا)</div>
        </div>
        <div class="clue-item">
          <div class="clue-number">3</div>
          <div class="clue-text">مجموع: ا(1) + ب(2) = 3<br>حروف آخر کلمه</div>
        </div>
      </div>

      <div class="formula">
        <strong>فرمول محاسبه:</strong><br>
        رقم اول: ن(29) → رقم دوم = 9<br>
        رقم دوم: مثلث(3) + مربع(4) + دایره(10) = 17 → رقم اول = 1<br>
        رقم سوم: ق(24) → رقم اول = 2<br>
        رقم چهارم: ا(1) + ب(2) = 3 → همان عدد = 3
      </div>

      <div class="alphabet-table">
        <div style="text-align: center; color: #00ffff; margin-bottom: 10px; font-weight: bold;">الفبای فارسی</div>
        <div class="alphabet-row">
          <div class="alphabet-cell">ا=1</div>
          <div class="alphabet-cell highlight">ب=2</div>
          <div class="alphabet-cell">پ=3</div>
          <div class="alphabet-cell">ت=4</div>
          <div class="alphabet-cell">ث=5</div>
          <div class="alphabet-cell">ج=6</div>
          <div class="alphabet-cell">چ=7</div>
          <div class="alphabet-cell">ح=8</div>
        </div>
        <div class="alphabet-row">
          <div class="alphabet-cell">خ=9</div>
          <div class="alphabet-cell">د=10</div>
          <div class="alphabet-cell">ذ=11</div>
          <div class="alphabet-cell">ر=12</div>
          <div class="alphabet-cell">ز=13</div>
          <div class="alphabet-cell">ژ=14</div>
          <div class="alphabet-cell">س=15</div>
          <div class="alphabet-cell">ش=16</div>
        </div>
        <div class="alphabet-row">
          <div class="alphabet-cell">ص=17</div>
          <div class="alphabet-cell">ض=18</div>
          <div class="alphabet-cell">ط=19</div>
          <div class="alphabet-cell">ظ=20</div>
          <div class="alphabet-cell">ع=21</div>
          <div class="alphabet-cell">غ=22</div>
          <div class="alphabet-cell">ف=23</div>
          <div class="alphabet-cell">ق=24</div>
        </div>
        <div class="alphabet-row">
          <div class="alphabet-cell">ک=25</div>
          <div class="alphabet-cell">گ=26</div>
          <div class="alphabet-cell">ل=27</div>
          <div class="alphabet-cell">م=28</div>
          <div class="alphabet-cell highlight">ن=29</div>
          <div class="alphabet-cell">و=30</div>
          <div class="alphabet-cell">ه=31</div>
          <div class="alphabet-cell">ی=32</div>
        </div>
      </div>
    </div>

    <div class="lock-container">
      <div class="digital-lock">
        <div class="display" id="display">رمز 4 رقمی وارد کنید</div>

        <div class="progress-section">
          <div class="progress-text">وضعیت ورودی:</div>
          <div>
            <span class="status-light red" id="light1"></span>
            <span class="status-light red" id="light2"></span>
            <span class="status-light red" id="light3"></span>
            <span class="status-light red" id="light4"></span>
          </div>
        </div>

        <div class="keypad">
          <button class="key" onclick="addDigit('1')">1</button>
          <button class="key" onclick="addDigit('2')">2</button>
          <button class="key" onclick="addDigit('3')">3</button>
          <button class="key" onclick="addDigit('4')">4</button>
          <button class="key" onclick="addDigit('5')">5</button>
          <button class="key" onclick="addDigit('6')">6</button>


          <button class="key" onclick="addDigit('7')">7</button>
          <button class="key" onclick="addDigit('8')">8</button>
          <button class="key" onclick="addDigit('9')">9</button>
          <button class="key" onclick="clearInput()">C</button>
          <button class="key" onclick="addDigit('0')">0</button>
          <button class="key" onclick="checkCode()">✓</button>
        </div>

        <div class="attempts" id="attempts">تلاش‌های باقی‌مانده: 5</div>

        <div style="text-align: center; margin-top: 20px;">
          <button class="help-btn" onclick="toggleHint()">💡 راهنمایی</button>
          <button class="clear-btn" onclick="resetLock()">🔄 شروع مجدد</button>
        </div>
      </div>
    </div>

    <div class="hint-section" id="hintSection">
      <h4 style="color: #ffd700; margin-bottom: 10px;">💡 راهنمایی تفصیلی:</h4>
      <p><strong>کلمه هدف:</strong> نقاب (ن-ق-ا-ب)</p>
      <p><strong>رقم 1:</strong> ن(29) → رقم دوم = <span style="color: #00ff00;">9</span></p>
      <p><strong>رقم 2:</strong> مثلث(3) + مربع(4) + دایره(10) = 17 → رقم اول = <span style="color: #00ff00;">1</span>
      </p>
      <p><strong>رقم 3:</strong> ق(24) → رقم اول = <span style="color: #00ff00;">2</span></p>
      <p><strong>رقم 4:</strong> ا(1) + ب(2) = 3 → همان عدد = <span style="color: #00ff00;">3</span></p>
      <p style="color: #ffd700; font-weight: bold;">رمز نهایی: 9123</p>
    </div>

    <div class="success-animation" id="successMessage">
      🎉 قفل باز شد! 🎉<br>
      <div style="font-size: 0.6em; color: #00ffff; margin-top: 10px;">
        🎭 کلمه رمز: نقاب 🎭
      </div>
    </div>
  </div>

  <script>
    let currentInput = '';
    let attempts = 5;
    const correctCode = '9123';
    let isUnlocked = false;

    function addDigit(digit) {
      if (isUnlocked) return;

      if (currentInput.length < 4) {
        currentInput += digit;
        updateDisplay();
        updateLights();

        if (currentInput.length === 4) {
          setTimeout(checkCode, 300);
        }
      }
    }

    function updateDisplay() {
      const display = document.getElementById('display');
      if (currentInput.length === 0) {
        display.textContent = 'رمز 4 رقمی وارد کنید';
      } else {
        display.textContent = currentInput.padEnd(4, '_');
      }
    }

    function updateLights() {
      for (let i = 1; i <= 4; i++) {
        const light = document.getElementById(`light${i}`);
        if (i <= currentInput.length) {
          if (currentInput.length === 4 && checkDigit(i - 1)) {
            light.className = 'status-light green';
          } else if (currentInput.length < 4) {
            light.className = 'status-light yellow';
          } else {
            light.className = checkDigit(i - 1) ? 'status-light green' : 'status-light red';
          }
        } else {
          light.className = 'status-light red';
        }
      }
    }

    function checkDigit(index) {
      return currentInput[index] === correctCode[index];
    }

    function checkCode() {
      if (isUnlocked) return;

      if (currentInput.length !== 4) {
        document.getElementById('display').textContent = 'رمز ناقص است!';
        return;
      }

      if (currentInput === correctCode) {
        // Success!
        isUnlocked = true;
        document.getElementById('display').textContent = '🔓 قفل باز شد!';
        document.getElementById('display').style.color = '#00ff00';

        // Show success animation
        document.getElementById('successMessage').style.display = 'block';

        // Update all lights to green
        for (let i = 1; i <= 4; i++) {
          document.getElementById(`light${i}`).className = 'status-light green';
        }


        // Play success sound effect (visual feedback)
        document.querySelector('.digital-lock').style.boxShadow =
          'inset 5px 5px 10px rgba(0, 0, 0, 0.8), inset -5px -5px 10px rgba(255, 255, 255, 0.1), 0 0 30px rgba(0, 255, 0, 0.8)';

        document.getElementById('attempts').textContent = '✅ موفقیت آمیز!';
        document.getElementById('attempts').style.color = '#00ff00';

      } else {
        // Wrong code
        attempts--;
        document.getElementById('attempts').textContent = `تلاش‌های باقی‌مانده: ${attempts}`;
        document.getElementById('attempts').style.color = attempts <= 2 ? '#ff4444' : '#ffd700';

        if (attempts <= 0) {
          document.getElementById('display').textContent = '🔒 قفل شد! مجدد تلاش کنید';
          document.getElementById('display').style.color = '#ff4444';
          document.getElementById('attempts').textContent = '❌ تلاش‌ها تمام شد!';
        } else {
          document.getElementById('display').textContent = `❌ اشتباه! ${attempts} تلاش باقی`;
          document.getElementById('display').style.color = '#ff4444';

          // Shake effect
          const lock = document.querySelector('.digital-lock');
          lock.style.animation = 'shake 0.5s ease-in-out';
          setTimeout(() => {
            lock.style.animation = '';
          }, 500);
        }

        updateLights();
        setTimeout(clearInput, 2000);
      }
    }

    function clearInput() {
      if (isUnlocked) return;
      currentInput = '';
      updateDisplay();
      updateLights();
      if (attempts > 0) {
        document.getElementById('display').style.color = '#00ff00';
      }
    }

    function resetLock() {
      currentInput = '';
      attempts = 5;
      isUnlocked = false;

      updateDisplay();
      updateLights();

      document.getElementById('display').style.color = '#00ff00';
      document.getElementById('attempts').textContent = 'تلاش‌های باقی‌مانده: 5';
      document.getElementById('attempts').style.color = '#ffd700';
      document.getElementById('successMessage').style.display = 'none';

      document.querySelector('.digital-lock').style.boxShadow =
        'inset 5px 5px 10px rgba(0, 0, 0, 0.8), inset -5px -5px 10px rgba(255, 255, 255, 0.1), 0 0 20px rgba(0, 255, 255, 0.3)';
    }

    function toggleHint() {
      const hintSection = document.getElementById('hintSection');
      hintSection.style.display = hintSection.style.display === 'block' ? 'none' : 'block';
    }

    // Add shake animation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
    `;
    document.head.appendChild(style);

    // Initialize display
    updateDisplay();
    updateLights();

    // Keyboard support
    document.addEventListener('keydown', function (event) {
      if (event.key >= '0' && event.key <= '9') {
        addDigit(event.key);
      } else if (event.key === 'Enter') {
        checkCode();
      } else if (event.key === 'Backspace' || event.key === 'Delete') {
        if (currentInput.length > 0) {
          currentInput = currentInput.slice(0, -1);
          updateDisplay();
          updateLights();
        }
      } else if (event.key === 'Escape') {
        clearInput();
      }
    });
  </script>

</body>

</html>
